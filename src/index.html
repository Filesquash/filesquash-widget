<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>Stencil Component Starter</title>
  <script src="https://revillweb.github.io/img-2/dist/img-2.js"></script>
  <script src="/build/filesquash.js"></script>
</head>
<body>

  <div>
    <h2>Exemplo: filesquash-widget</h2>
    <filesquash-widget token="YOUR_TOKEN" id="widget"></filesquash-widget>
  </div>

  <hr>

  <div>
    <h2>Exemplo: filesquash-modal</h2>
    <button onclick="showModal()">Exibir modal</button>
    <filesquash-modal token="YOUR_TOKEN" id="modal"></filesquash-modal>
  </div>

  <hr>

  <div>
    <h2>Exemplo: filesquash-img</h2>
    <filesquash-img
      src="https://filesquash.io/static/myimage.jpg"
      project-id="e6b0c7ca"
      size="w_auto"
      filters="blur=10;mirror=true"
      id="image1"
    ></filesquash-img>

    <filesquash-img
      src="f6d59861-9a27-4ae1-bce0-f9d6e225a865"
      project-id="e6b0c7ca"
      size="560x"
      progressive="false"
      filters="grayscale=true"
    ></filesquash-img>
  </div>

  <script>
    // Exemplo: filesquash-widget
    const widgetElm = document.querySelector('#widget');
    widgetElm.componentOnReady()
      .then(() => {
        widgetElm.addEventListener(
          'uploadCompleted',
          console.log
        )
      });

    document.addEventListener('filesquash:uploadStarted', function(e) { console.log('filesquash:uploadStarted', e) });
    document.addEventListener('filesquash:uploadCompleted', function(e) { console.log('filesquash:uploadCompleted', e) });

    // Exemplo: filesquash-modal
    const modalElm = document.querySelector('#modal');
    modalElm.addEventListener(
      'uploadCompleted',
      e => console.log(e.detail)
    )

    function showModal() {
      modalElm.componentOnReady()
        .then(() => {
          modalElm.toggleModal();
        });
    }

    // Exemplo: filesquash-img
    const image1Elm = document.querySelector('#image1');
    image1Elm.componentOnReady()
      .then(() => {
        image1Elm.addEventListener(
          'imageLoad',
          console.log
        )
      });
  </script>
</body>
</html>
