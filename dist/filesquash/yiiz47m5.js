/*! Built with http://stenciljs.com */
const{h:t}=window.filesquash;class e{validateName(t){if(null==typeof t)throw new Error("src: required")}validateProjectId(t){const e=null==typeof t,s="string"==typeof t&&8===t.length;if(e)throw new Error("projectId: required");if(!s)throw new Error("projectId: invalid")}getFilters(t,e){const s=["grayscale"];let r="filters:quality(100)",i="",a="";return t.split(";").forEach(t=>{const[e,l]=t.split("=");"mirror"===e?a=l?"-":"":"crop"===e?i=l||"":r+=`:${e}(${-1===s.indexOf(e)?l:""})`}),`${e?i+a+e+"/":""}${r}`}processExternalImage(t,e,s,r){return`https://filesquash.io/v1/${e}/process/${this.getFilters(r,s)}/${encodeURIComponent(t)}`}processHostedImage(t,e,s,r,i){return i?`https://filesquash.io/v1/${e}/assets/${t}/${this.getFilters(r,s)}`:`${t}/${this.getFilters(r,s)}/${encodeURIComponent(t)}`}getImage(t,e,s,r){const i=new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}/i),a=new RegExp(/^(http|https):\/\/filesquash\.io\/[0-9A-Z]{8}\/assets\//i),l=i.test(t);return a.test(t)||l?this.processHostedImage(t,e,s,r,l):this.processExternalImage(t,e,s,r)}render(){return t("img",{src:this.getImage(this.src,this.projectId,this.size,this.filters),alt:this.alt})}static get is(){return"filesquash-img"}static get properties(){return{alt:{type:String,attr:"alt"},el:{elementRef:!0},filters:{type:String,attr:"filters"},projectId:{type:String,attr:"project-id",watchCallbacks:["validateProjectId"]},size:{type:String,attr:"size"},src:{type:String,attr:"src",watchCallbacks:["validateName"]}}}static get style(){return"filesquash-img{display:inline-block}"}}export{e as FilesquashImg};