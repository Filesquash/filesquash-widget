/*! Built with http://stenciljs.com */
import{h}from"./filesquash.core.js";var MyComponent=function(){function t(){}return t.prototype.validateName=function(t){if(null==typeof t)throw new Error("src: required")},t.prototype.validateProjectId=function(t){var e=null==typeof t,r="string"==typeof t&&8===t.length;if(e)throw new Error("projectId: required");if(!r)throw new Error("projectId: invalid")},t.prototype.getFilters=function(t,e){var r=["grayscale"],i="filters:quality(100)",o="",s="";return t.split(";").forEach(function(t){var e=t.split("="),n=e[0],a=e[1];"mirror"===n?s=a?"-":"":"crop"===n?o=a||"":i+=":"+n+"("+(-1===r.indexOf(n)?a:"")+")"}),(e?o+s+e+"/":"")+i},t.prototype.processExternalImage=function(t,e,r,i){return"https://filesquash.io/v1/"+e+"/process/"+this.getFilters(i,r)+"/"+encodeURIComponent(t)},t.prototype.processHostedImage=function(t,e,r,i,o){return o?"https://filesquash.io/v1/"+e+"/assets/"+t+"/"+this.getFilters(i,r):t+"/"+this.getFilters(i,r)+"/"+encodeURIComponent(t)},t.prototype.getImage=function(t,e,r,i){var o=new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}/i),s=new RegExp(/^(http|https):\/\/filesquash\.io\/[0-9A-Z]{8}\/assets\//i),n=o.test(t);return s.test(t)||n?this.processHostedImage(t,e,r,i,n):this.processExternalImage(t,e,r,i)},t.prototype.render=function(){return h("img",{src:this.getImage(this.src,this.projectId,this.size,this.filters),alt:this.alt})},Object.defineProperty(t,"is",{get:function(){return"filesquash-img"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{alt:{type:String,attr:"alt"},el:{elementRef:!0},filters:{type:String,attr:"filters"},projectId:{type:String,attr:"project-id",watchCallbacks:["validateProjectId"]},size:{type:String,attr:"size"},src:{type:String,attr:"src",watchCallbacks:["validateName"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"filesquash-img{display:inline-block}"},enumerable:!0,configurable:!0}),t}();export{MyComponent as FilesquashImg};